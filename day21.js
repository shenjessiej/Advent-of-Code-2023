const input = `...................................................................................................................................
....#...........#...#...........................#....................................#....##........#..........#.....#.............
..........#...##..#.....................#.#.#..................................#.#..#..#............#........#.....................
....#................##.....................#..........#........................##.#...#..#......#...#......#....#.................
.#..#.................................#.................................................#..#............#..#.##.#.#.........###....
..#...#.#.......#......#...........#................#............................................##.........#...#...#....##........
................#.#..........#..........##..#..............................#...#................#.#......##.......#............#...
........#.#...#..#.##.#.....#......................#.#.............................#....#......#.#.#...#........#..................
.#...##.........#..#..........#....#.....#...........................................#........#.......#.......#...........#........
.........##............#.......#..#.......#...#.#.....................................#..###.......###.........#.....#...#.....#...
.#..#.......#....#..#............#.....#............................#................#.........##...................#..#.#..#......
.#.................###..#...........#.........#................##....#...........#...........#.....................................
.....##.........#..#..........#.....##....#................#..##...................#......#.....#..#.....#.#.......................
..........#......#..............#..#...#..............................................#...........#.#........#............#.#......
...........#.#......#.....#.#.....#.....................#...........#....#.............#.#......##...#......#.....##...............
..............#...##....##.....#......#...............#.#.#...#.....#.................#.#.............#...............#....#.#.#...
.##.#........#.........#.#.#....#....#.......#.........................#...............#..........#.....##....#...............##...
.....#.......##............#.........#....#.................#.................#.......#...............#......................#...#.
...............#..........................#........#..#.......##..#....#..#...#................#....#...#.........#.#.#..#......#..
..........#..#..#..#.##.........#......#.......................#.....#.........#......................#...#.##......#....#....#....
....#.........#......#................#..#.............##.#......................#...........#..#.............#....##........#.....
.............#...#.................#...#...........#...#.#......#......#.......................#.................#....#.#....##....
.......#.#.....#..........#.....#.##............#.#......#........#...#.......##................#................#.......#.........
.#.....................#..#.....#.#...........................#..................#...........#....#......##..............#.....##..
.....#..............#....#.....................#..##...........................#..................#...................#.........#..
....#..#.##........#.....#.........................................#......#.......................#....#....#...#...#....#...#.....
...................#....###....#............#..#.............#.#......#........##.................#...#....#.....#.##..............
......#...#........#....#.....#................#...............................#........................##..#..#......##........#..
.#.....#..........#....#........#................#....#...#..#..#.............#..#..........................#.........#..........#.
.......................#.....#.................#.....................................##.#.........#..................#.....#....#..
.#..................#....#....#...........#....#...#..#..#.............#....#....#####....#.........#.......#..#..###...........##.
....#.......#.#............#.#.................##.............#.#.#....#...##...#...#...............##.###...........##......#...#.
.....#...#...#.........#.....................#....##..#........#......#.................#.#...................#.#..............#...
........##.....##.........#.#......................................#..........#.....#.#.....#.#..............#..........#..........
........#....#.........#..#..............##.....#.....#.....#............#............#....................#.....#.....#.......#.#.
......##...........................#............#.....#.#..............#...........#.......................................#.......
.#.......#...#....#...............................#....##...#..........#.##........##....#................##...........#...........
.#.##.........#.................#................#.#..#.#................#.................................#.......................
.#..#..............#.##.........##.....................................#.....#........#.#..##..#..##............#..........#...#...
....#.##...........###.........#.....#........##...#...#......##..#...............#.#.......#...#.#..........#..........#..........
..........#.....#.....................#..##..#.#.##.............#..............#.............#......##...........##....#.......#...
.....#.......#..................#..........#.......#........#..........##.....#....#...........................#..............#....
.........#.......................##...............#......#.....#...#..........#.#..#...................#...................#.##....
.........#..............................##......##...#..............#...##......#..............#.....#.......................#.....
....#............................#...#..#.#.......#.............#...............#.....#..................#........#.........#......
..#.....................##........#......#...#....#.#..............#...............#.........#...#....#.###..........#....#..#..#..
...........#...#.................#.........#..##.#......#.#.................#..#.......#..............................#..........#.
.....#.#.................##.#.....#....#.........#.....#..#...#.......##..#................................##.................#....
.......#..............#.......#................#.......#..............##.....#...#...#.............................................
.#......#.................#......#.......#.........#...........#...#.......#...#...#......#.......#.#.....#...#..................#.
..#...#...............#.......#.#...................#.....#.#........................#......#....##.#..............................
...##....#......................................#......##.......................#..#...##...............................#...#......
.##..........................................#...............#.......................##.....#...............#.#....................
..#..#...................................##..#.....................................#........##.....#....###......##............#...
...#............#.......#.........#..#.....#.......#.........##........................#...#...#.#..#....#.#.##....#........##.#...
.....#...........#.#....#..............#.....#..............#.................#.......#....#................#....#.................
....#............#......#.............#....#.#...##..#....#.#...#......#.......#...........#..........#.......#....................
...##..............#......#...#........#.........#...#....#............#..#..........#.#..#.......#...#.........#.....#............
.............#.##.........#...#....##.#...#...........##...........##..#....#.......#............##................#...............
.............#..##...#.#.#.#..#.#............#...#......#...#.....#.........###....#..............#............#.#.....#........##.
..........#.................#.....#.........#.#......#.#...........#.......#...............#..#..........#........#.....##.......#.
....................#................#......................#..............#........##...#......#....#...........#.#....#..........
..................#.....#.#.#....#...#..........................#...#...........................................#....#...#.........
......#..........#.#..#........#.....#.......................#.........#......#.............#..............................#.......
...........##....#..#........#...#............#...............#.#.##.#.#.#............#...#........#.....#..#.#...#......#.........
.................................................................S.................................................................
.....#........#......#...........#..#............#..............#........###........#......#............#.....#....#...#...........
..................................#..#................#........#.........#...#.#.......#..#..........#...........#......#.#........
............#.........###........#........##........................#...#.....#......#..##..#.......#..###..............#..........
..........#..............................................#...............#..............#............#.#...#..............#........
...........#...#..#...##...........#............#.....#.#..#..#........#..#...............#...............#.....#.....#.##.........
.....................#....#..........#..#..................#..#.........#......#..................#.................#..#...........
............#....#.#...............#.....#..........##..............#...#.#....#....#......#.......................................
.#...........#............#..#..#....................................#.......#......#.....#....#.............#.....................
..#.#...........#.............#...............#...#.....#.......#.............#.........#.#.........#..........#...................
..............#................##.#.#.#.#......#...#...........#....#.#.....................#...........##.#..#.............#.##...
...#...............#..........................##........#..#.....................#...........#...#...#.#...#......##...............
........#..........#...#..........#...#.....#............#.......................#.#..........#...#..........................##....
.......#..............#.............#.......##.#..#...#........#.....#..#.....#....#............................#........#...#.....
..........#.............#...........#........#..#...###....#..........#...#....#..............#.##.............#.........#...#.##..
.........................#.#..........#.....#.........##.#..............#.....##.........#.##.....#.....#..........................
....#....#.................#..........#...#.....##.#...#....#.........##.....#.##.............................................#....
...#....#.#............#...........................#......................#..#..#...###............#...#...........................
..............#............#................#...#.#..........................#....................#...#.#............#.....#.....#.
.......#.......#........#..................#.#....#...#..............#......#...............#.......##...#.................#.......
.....#.#..............................#.#...#..................#...........#.##................#...................#..#.#..........
.....#..........#..........#.#.....#.........#....................#..#..#.......#......................##................#.....#...
....#..................................#....#........#.........#..........#...#.........#..#..........#.............#.......#..#...
.#.................#........#..#.#......#..#.#.....#..#.........#......#......#.#........#.....#.#....#............#.......#.##....
...............#................#..........#...#.#...#...#....#.#..#...........#....#..............................#............#..
.........#...........#.........#................................#...#..#........................................#....#.#...........
...#..................#...........#........#................#.#....#............#...#........................#...#.................
.#..............##.....#.......#......#..............#..........................#.#...........#............#...........#....#......
........#....#......................#................#........#...................#.........................#.#....#............##.
...........#.........#.#...........##......##..#.#..#.....................#.#......#...........#.............#.....................
...........#...##.........#...........................#......##.......#......#...............#.#...........#.##...#..#..#..#..#....
....#...##..#.#..#.#....#...........#.........#.....#.........#.#.....................#..................#..........#........##.#..
.....##....#..........#.#...........#....#..............#................#.......#....................##......#....................
.#..#..#........#....................#..#.#....#........##.....##.#......#.....#......#....#.....................#......#..###.#...
.........#...#...............#.........#..#............#.#....#.........#.............#...#.................#..............##......
...##........#.#.#.....##..#........................#....#...#...........#..........#.#............#.#...#.............#...........
...##..............#......##.................#...........#..........#..............##......................#...#.....#....#..#.....
........#........#........#.................###.................................#....................##.#.#...#...............#..#.
.......#.......................................#..........#..........................#.#............#.........#..#..##.............
.........#.........................#................#................#...#.......#..#..#.......#.........###.......................
........#.....#......###.#...............................#........#....#.....#..##.............................#..#...#........#...
...........#.#....#..........#.#...#..........####.#......####.#....................#.............................#................
...##.............#..#........#................#......................#...#......#..#........#......#..................#...#.#...#.
.#........#.......#.......#.......#................#........#..#.....#...........#.........#.......#.#........#........##...#..#...
..........#.......#............#.........................#.................#....#...........##.........#...#................#....#.
.........##.#.....#...#..##..............................#..................................##......##..#..........................
........#......###..#....#....#.##....#..............#........#...#.........................................#........#...........#.
.......#.....#.#..#....#..........#...#.#..#....................#........#..............#......#..#..#....#............#.......#...
...........#.##..#......##.#...............#.............#.##.............#.......................#...........##...................
.###.....................#.#..........................................#.#.................#........#............#.........#........
.....#....#......#..#.....#............#..............................................#....##.......#........#..#..........#.......
.......#......................................................##...#.................#.......................##....................
......#.#....#...#...............#.#...#..#...............##......#..#............#.....#.......#.................#..##..#.#.....#.
............#........#..#.........#....#......##.#........#....#..#...........................#...............#............##......
.....#....#.##.......................#....................#.#.................................................#....##....#...#.....
..............###..#.....#........#.........##.#...........#.#.#...#.............#......#...............#.##...........##..........
........................#..#.........#.....#.......#.........#.....#................#.#.#..........................#.#......##.....
.......##........#......#........#.##.#.#........#......................................#......#...#.#...#.......#..#.....#........
.#.....####..........#......#.......................#.............#...........#.....#.......#.#.....................#..............
...#.....#...##.............#...............#..##..................#................#..........#...#........#.......#..............
.#.........#..#...#.#....#....#.......#...........#...............#...............#...#........#..........................#........
...............#....#........###.......#....................................#.................#...........#.........#..#...........
.......#......#..#.....#.........#.........#............#.......................#..#........#...#..#.....#.......#.............#...
........................#.............#........#..........#.................#......##.#..#...#.............#...........#...#....#..
....#.....#....#......#...#...#...................#..##.................#..........##.##...............#..........##...............
...................................................................................................................................`;

const test = `...........
.....###.#.
.###.##..#.
..#.#...#..
....#.#....
.##..S####.
.##..#...#.
.......##..
.##.#.####.
.##..##.##.
...........`;

const test2 = `...
.S.
...`;

let grid = input.split("\n").map((line) => {
  return line.split("");
});

let start = [];

grid.forEach((line, i) => {
  for (let j = 0; j < line.length; j++) {
    if (line[j] == "S") {
      start = [i, j];
      break;
    }
  }
});

function hash(coord) {
  return "[" + coord[1] + "," + coord[0] + "]";
}
let deltas = [
  [0, 1],
  [1, 0],
  [0, -1],
  [-1, 0],
];
let visited = new Set();
let reachable_plots = [];

reachable_plots.push(start);

let steps = 0;

// steps = [65, 65 + 131, 65 + 131 * 2];

while (steps < 65 + 131 * 2) {
  let queue = reachable_plots;
  reachable_plots = [];
  visited = new Set();
  queue.forEach((plot) => {
    deltas.forEach((delta) => {
      let new_x = plot[1] + delta[1];
      let new_y = plot[0] + delta[0];

      let transposed_x = new_x;
      let transposed_y = new_y;
      
      while (transposed_x < 0) transposed_x += grid[0].length;
      while (transposed_x >= grid[0].length) transposed_x = transposed_x - grid[0].length;

      while (transposed_y < 0) transposed_y += grid.length;
      while (transposed_y >= grid.length) transposed_y = transposed_y - grid.length;
      /*
      if (
        new_x >= 0 &&
        new_x < grid[0].length &&
        new_y >= 0 &&
        new_y < grid.length
      ) {
      */
      if (grid[transposed_y][transposed_x] != "#" && !visited.has(hash([new_y, new_x]))) {
        visited.add(hash([new_y, new_x]));
        reachable_plots.push([new_y, new_x]);
      }
      //}
    });
  });
  steps++;
}

console.log(reachable_plots.length);



let y = [3889, 34504, 95591];

let a = y[0] / 2 - y[1] + y[2] / 2;
let b = -3 * (y[0] / 2) + 2 * y[1] - y[2] / 2;
let c = y[0];

// num of squares
// (26501365 - 65) / 131
const x = 202300;
console.log(a * Math.pow(x, 2) + b * x + c);
